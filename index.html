<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIP Casino Slots - Luxury Slot Machine</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Основные стили */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap');
        
        body {
            font-family: 'Montserrat', sans-serif;
            background: linear-gradient(135deg, #170f33, #46214b, #7d1e4c);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
            text-align: center;
            padding: 20px 0 60px 0; /* Учитываем нижнюю панель */
            position: relative;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Главный контейнер игры */
        .casino-container {
            width: 95%;
            max-width: 850px;
            background-image: linear-gradient(to bottom, rgba(0,0,0,0.85) 0%, rgba(30,12,54,0.9) 100%);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7), 0 0 20px rgba(137, 43, 226, 0.5);
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(255, 215, 0, 0.5);
            margin: 0 auto;
        }

        /* Заголовок и логотип */
        .casino-header {
            margin-bottom: 25px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .logo {
            font-size: 3.5em;
            font-weight: 900;
            letter-spacing: 2px;
            background: linear-gradient(to right, #FFD700, #ff9900, #ff5e00, #FFD700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            text-transform: uppercase;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.5);
            animation: logoPulse 2s infinite;
        }

        @keyframes logoPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .subtitle {
            font-size: 1.2em;
            color: #FFD700;
            margin-bottom: 10px;
            letter-spacing: 1px;
        }

        /* Панель информации */
        .info-panel {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .info-box {
            background-color: rgba(0, 0, 0, 0.7);
            padding: 15px 20px;
            border-radius: 15px;
            min-width: 160px;
            border: 1px solid rgba(255, 215, 0, 0.3);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        .info-box h3 {
            font-size: 0.9em;
            color: #FFD700;
            margin-bottom: 5px;
        }

        .info-box .value {
            font-size: 1.5em;
            font-weight: bold;
            color: white;
        }

        /* Стиль для барабанов */
        .slot-machine {
            position: relative;
            margin: 40px 0;
            padding: 15px;
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 20px;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.8), 0 0 15px rgba(255, 215, 0, 0.3);
            border: 2px solid #8B4513;
        }

        .slot-frame {
            display: flex;
            justify-content: space-around;
            background: linear-gradient(to bottom, #8B4513, #4a2511);
            padding: 20px;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
        }

        .slot-frame::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, 
                rgba(255,255,255,0.1) 0%, 
                rgba(255,255,255,0.05) 20%, 
                rgba(0,0,0,0.05) 80%, 
                rgba(0,0,0,0.1) 100%);
            pointer-events: none;
        }

        .reel-container {
            background-color: #000;
            border-radius: 10px;
            overflow: hidden;
            width: 120px;
            height: 180px;
            margin: 0 5px;
            position: relative;
            border: 3px solid #6b3e11;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.9);
        }

        .reel {
            position: absolute;
            top: 0;
            width: 100%;
            display: flex;
            flex-direction: column;
        }

        .symbol {
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2.5em;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s, text-shadow 0.3s;
        }

        .symbol.win {
            animation: bounce 0.5s ease-in-out 3;
            text-shadow: 0 0 10px #FFD700, 0 0 20px #FFD700;
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        /* Линия выигрыша */
        .win-line {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(to right, transparent, #FF0000, transparent);
            transform: translateY(-50%);
            z-index: 10;
            box-shadow: 0 0 15px #FF0000, 0 0 30px #FF0000;
            opacity: 0;
            animation: pulseLine 1s infinite;
        }

        @keyframes pulseLine {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        /* Контрольные кнопки */
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .control-button {
            background: linear-gradient(to bottom, #FFD700, #B8860B);
            color: #000;
            font-weight: bold;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            cursor: pointer;
            border-radius: 50px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            min-width: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
        }

        .control-button::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(30deg);
            transition: all 0.5s;
            opacity: 0;
        }

        .control-button:hover::before {
            opacity: 1;
            top: 50%;
            left: 50%;
        }

        .control-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 20px rgba(0, 0, 0, 0.4);
            background: linear-gradient(to bottom, #ffd900, #d4a017);
        }

        .control-button:active {
            transform: translateY(1px);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
        }

        .control-button.spin {
            background: linear-gradient(to bottom, #ff3019, #cf0404);
            color: white;
            font-size: 22px;
            padding: 15px 40px;
        }

        .control-button.spin:hover {
            background: linear-gradient(to bottom, #ff4029, #df1414);
        }

        .bet-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .bet-button {
            background-color: #333;
            color: white;
            border: 1px solid #FFD700;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            transition: all 0.2s;
        }

        .bet-button:hover {
            background-color: #444;
            transform: scale(1.05);
        }

        .bet-value {
            font-size: 1.2em;
            font-weight: bold;
            margin: 0 10px;
            color: #FFD700;
            min-width: 60px;
        }

        /* Результат и анимации */
        .result-container {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            background-color: rgba(0, 0, 0, 0.6);
            transition: all 0.5s;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .result-text {
            font-size: 1.8em;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.5s, transform 0.5s;
            transform: translateY(20px);
        }

        .result-text.show {
            opacity: 1;
            transform: translateY(0);
        }

        .win-message {
            color: #FFD700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
            animation: winGlow 1s infinite;
        }

        @keyframes winGlow {
            0%, 100% { text-shadow: 0 0 10px rgba(255, 215, 0, 0.7); }
            50% { text-shadow: 0 0 20px rgba(255, 215, 0, 1); }
        }

        .lose-message {
            color: #ff6b6b;
        }

        /* Кнопка таблицы выплат в игре */
        .top-buttons {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 15px;
        }

        .icon-button {
            background: none;
            border: none;
            color: #FFD700;
            font-size: 1.5em;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .icon-button:hover {
            transform: scale(1.1);
        }

        /* Нижняя навигационная панель */
        .nav-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: #1a1a1a;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #888;
            font-size: 0.9em;
            cursor: pointer;
            transition: color 0.3s;
        }

        .nav-item.active {
            color: #FFD700;
        }

        .nav-item i {
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .nav-item:hover {
            color: #FFD700;
        }

        /* Модальное окно */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: linear-gradient(135deg, #170f33, #46214b, #7d1e4c);
            border: 3px solid #FFD700;
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 0 50px #FFD700;
            position: relative;
            animation: modalFadeIn 0.5s;
        }

        @keyframes modalFadeIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .modal-header {
            font-size: 2.5em;
            margin-bottom: 20px;
            background: linear-gradient(to right, #FFD700, #FFA500, #FF8C00, #FF4500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-transform: uppercase;
            font-weight: 900;
        }

        .modal-body {
            margin-bottom: 30px;
            font-size: 1.2em;
            line-height: 1.5;
        }

        .modal-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .modal-button {
            background: linear-gradient(to bottom, #FFD700, #B8860B);
            color: black;
            border: none;
            padding: 12px 25px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 120px;
        }

        .modal-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        /* Настройки */
        .settings-body {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .volume-control label {
            color: #FFD700;
            font-weight: bold;
        }

        .volume-control input[type="range"] {
            width: 100%;
            max-width: 300px;
        }

        .terms-text {
            text-align: left;
            max-height: 200px;
            overflow-y: auto;
            padding: 10px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
        }

        /* Кнопка "назад" как иконка */
        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            background: none;
            border: none;
            color: #FFD700;
            font-size: 1.5em;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .back-button:hover {
            transform: scale(1.1);
        }

        /* Частицы для выигрыша */
        .particles {
            position: absolute;
            pointer-events: none;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            overflow: hidden;
            z-index: 100;
            display: none;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #FFD700;
            opacity: 0.8;
            transform-origin: center;
            animation: fall 2s linear;
        }

        @keyframes fall {
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }

        /* Адаптивность */
        @media (max-width: 768px) {
            .logo {
                font-size: 2.5em;
            }
            
            .casino-container {
                padding: 20px 15px;
            }
            
            .reel-container {
                width: 90px;
                height: 150px;
            }
            
            .symbol {
                height: 50px;
                font-size: 2em;
            }
            
            .controls {
                gap: 10px;
            }
            
            .control-button {
                padding: 12px 20px;
                font-size: 16px;
                min-width: 120px;
            }
            
            .control-button.spin {
                font-size: 18px;
            }
            
            .info-box {
                padding: 10px 15px;
                min-width: 130px;
            }
        }
    </style>
</head>
<body>
    <!-- Главный контейнер игры -->
    <div class="casino-container" id="gameContainer">
        <button id="backToNav" class="back-button"><i class="fas fa-arrow-left"></i></button>
        <div class="top-buttons">
            <button id="paytableGameButton" class="icon-button"><i class="fas fa-table"></i></button>
        </div>
        
        <div class="casino-header">
            <h1 class="logo">Royal Slots</h1>
            <p class="subtitle">Experience the Taste of Luxury</p>
        </div>
        
        <div class="info-panel">
            <div class="info-box">
                <h3>BALANCE</h3>
                <div class="value" id="balance">5000</div>
            </div>
            <div class="info-box">
                <h3>BET</h3>
                <div class="value" id="betAmount">100</div>
            </div>
            <div class="info-box">
                <h3>WIN</h3>
                <div class="value" id="winAmount">0</div>
            </div>
        </div>
        
        <div class="slot-machine">
            <div class="slot-frame">
                <div class="win-line" id="winLine"></div>
                
                <div class="reel-container">
                    <div class="reel" id="reel1"></div>
                </div>
                
                <div class="reel-container">
                    <div class="reel" id="reel2"></div>
                </div>
                
                <div class="reel-container">
                    <div class="reel" id="reel3"></div>
                </div>
            </div>
        </div>
        
        <div class="controls">
            <div class="bet-controls">
                <button id="decreaseBet" class="bet-button">-</button>
                <span id="currentBet" class="bet-value">100</span>
                <button id="increaseBet" class="bet-button">+</button>
            </div>
            
            <button id="spinButton" class="control-button spin">
                <i class="fas fa-play-circle"></i> SPIN
            </button>
            
            <button id="maxBetButton" class="control-button">
                MAX BET
            </button>
        </div>
        
        <div class="result-container">
            <p id="resultText" class="result-text">Good Luck!</p>
        </div>
    </div>
    
    <!-- Нижняя навигационная панель -->
    <div class="nav-bar" id="navBar">
        <div class="nav-item" data-tab="leaders">
            <i class="fas fa-trophy"></i>
            <span>Leaders</span>
        </div>
        <div class="nav-item" data-tab="challenges">
            <i class="fas fa-puzzle-piece"></i>
            <span>Challenges</span>
        </div>
        <div class="nav-item active" data-tab="play">
            <i class="fas fa-play"></i>
            <span>Play</span>
        </div>
        <div class="nav-item" data-tab="friends">
            <i class="fas fa-users"></i>
            <span>Friends</span>
        </div>
        <div class="nav-item" data-tab="about">
            <i class="fas fa-info-circle"></i>
            <span>About</span>
        </div>
    </div>

    <!-- Модальные окна -->
    <div id="balanceModal" class="modal">
        <div class="modal-content">
            <button id="backToGameFromBalance" class="back-button"><i class="fas fa-arrow-left"></i></button>
            <h2 class="modal-header">YOUR BALANCE</h2>
            <div class="modal-body">
                <p>Current Balance: <span id="modalBalance">5000</span> coins</p>
            </div>
            <div class="modal-actions">
                <button id="replenishButton" class="modal-button">REPLENISH</button>
                <button id="withdrawButton" class="modal-button">WITHDRAW</button>
                <button id="closeBalance" class="modal-button">CLOSE</button>
            </div>
        </div>
    </div>

    <div id="paytableModal" class="modal">
        <div class="modal-content">
            <button id="backToGameFromPaytable" class="back-button"><i class="fas fa-arrow-left"></i></button>
            <h2 class="modal-header">WINNING TABLE</h2>
            <div class="modal-body" id="modalPaytable">
                <div class="paytable-grid">
                    <div class="paytable-item">
                        <div class="paytable-symbols">7️⃣7️⃣7️⃣</div>
                        <div class="paytable-win">x50</div>
                    </div>
                    <div class="paytable-item">
                        <div class="paytable-symbols">💎💎💎</div>
                        <div class="paytable-win">x20</div>
                    </div>
                    <div class="paytable-item">
                        <div class="paytable-symbols">🔔🔔🔔</div>
                        <div class="paytable-win">x15</div>
                    </div>
                    <div class="paytable-item">
                        <div class="paytable-symbols">🃏🃏🃏</div>
                        <div class="paytable-win">x10</div>
                    </div>
                    <div class="paytable-item">
                        <div class="paytable-symbols">🍒🍒🍒</div>
                        <div class="paytable-win">x8</div>
                    </div>
                    <div class="paytable-item">
                        <div class="paytable-symbols">🍇🍇🍇</div>
                        <div class="paytable-win">x6</div>
                    </div>
                    <div class="paytable-item">
                        <div class="paytable-symbols">🍋🍋🍋</div>
                        <div class="paytable-win">x5</div>
                    </div>
                    <div class="paytable-item">
                        <div class="paytable-symbols">Any Two Matching</div>
                        <div class="paytable-win">x2</div>
                    </div>
                </div>
            </div>
            <button id="closePaytable" class="modal-button">CLOSE</button>
        </div>
    </div>

    <div id="jackpotModal" class="modal">
        <div class="modal-content">
            <button id="backToGameFromJackpot" class="back-button"><i class="fas fa-arrow-left"></i></button>
            <h2 class="modal-header">JACKPOT!</h2>
            <div class="modal-body">
                <p>Congratulations! You won <span id="jackpotAmount">0</span> coins!</p>
                <p>What an incredible luck!</p>
            </div>
            <button id="closeJackpot" class="modal-button">CLAIM</button>
        </div>
    </div>

    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <button id="backToPreviousFromSettings" class="back-button"><i class="fas fa-arrow-left"></i></button>
            <h2 class="modal-header">SETTINGS</h2>
            <div class="modal-body settings-body">
                <div class="volume-control">
                    <label for="volumeSlider">Volume:</label>
                    <input type="range" id="volumeSlider" min="0" max="1" step="0.1" value="1">
                </div>
                <div class="terms-text">
                    <h3>Terms and Conditions</h3>
                    <p>This is a demo slot game. No real money is involved. All winnings are virtual and for entertainment purposes only. By playing, you agree to use this game responsibly. The developers are not liable for any misuse or misinterpretation of the game’s purpose.</p>
                </div>
            </div>
            <button id="closeSettings" class="modal-button">CLOSE</button>
        </div>
    </div>
    
    <!-- Частицы для выигрыша -->
    <div class="particles" id="particles"></div>
    
    <script>
        // Инициализация переменных
        let balance = 5000;
        let currentBet = 100;
        let isSpinning = false;
        let soundEnabled = true;
        let symbols = ['🍒', '💎', '7️⃣', '🍋', '🃏', '🔔', '🍇'];
        const SYMBOL_HEIGHT = 60;
        const CENTER_INDEX = 10;
        let previousScreen = 'game'; // Отслеживание предыдущего экрана для настроек

        // Элементы DOM
        const gameContainer = document.getElementById('gameContainer');
        const navBar = document.getElementById('navBar');
        const navItems = navBar.querySelectorAll('.nav-item');
        const backToNav = document.getElementById('backToNav');
        const spinButton = document.getElementById('spinButton');
        const resultText = document.getElementById('resultText');
        const reels = [
            document.getElementById('reel1'),
            document.getElementById('reel2'),
            document.getElementById('reel3')
        ];
        const balanceDisplay = document.getElementById('balance');
        const betAmountDisplay = document.getElementById('betAmount');
        const currentBetDisplay = document.getElementById('currentBet');
        const winAmountDisplay = document.getElementById('winAmount');
        const decreaseBetButton = document.getElementById('decreaseBet');
        const increaseBetButton = document.getElementById('increaseBet');
        const maxBetButton = document.getElementById('maxBetButton');
        const paytableGameButton = document.getElementById('paytableGameButton');
        const winLine = document.getElementById('winLine');
        const jackpotModal = document.getElementById('jackpotModal');
        const jackpotAmount = document.getElementById('jackpotAmount');
        const closeJackpot = document.getElementById('closeJackpot');
        const backToGameFromJackpot = document.getElementById('backToGameFromJackpot');
        const balanceModal = document.getElementById('balanceModal');
        const modalBalance = document.getElementById('modalBalance');
        const replenishButton = document.getElementById('replenishButton');
        const withdrawButton = document.getElementById('withdrawButton');
        const closeBalance = document.getElementById('closeBalance');
        const backToGameFromBalance = document.getElementById('backToGameFromBalance');
        const paytableModal = document.getElementById('paytableModal');
        const closePaytable = document.getElementById('closePaytable');
        const backToGameFromPaytable = document.getElementById('backToGameFromPaytable');
        const settingsModal = document.getElementById('settingsModal');
        const volumeSlider = document.getElementById('volumeSlider');
        const closeSettings = document.getElementById('closeSettings');
        const backToPreviousFromSettings = document.getElementById('backToPreviousFromSettings');
        const particles = document.getElementById('particles');

        // Аудио элементы (Funk/Soul музыка)
        const backgroundMusic = new Audio('https://www.bensound.com/bensound-music/bensound-funky.mp3'); // Пример фанк трека
        backgroundMusic.loop = true;
        const spinSound = new Audio('https://freesound.org/data/previews/120/120374_1342136-lq.mp3');
        const winSound = new Audio('https://freesound.org/data/previews/387/387117_5121236-lq.mp3');
        const jackpotSound = new Audio('https://freesound.org/data/previews/511/511484_5121236-lq.mp3');

        // Установка громкости
        function setVolume(volume) {
            backgroundMusic.volume = volume;
            spinSound.volume = volume;
            winSound.volume = volume;
            jackpotSound.volume = volume;
        }

        // Воспроизведение звука
        function playSound(sound) {
            if (soundEnabled) {
                sound.currentTime = 0;
                sound.play().catch(e => console.log("Error playing sound:", e));
            }
        }

        // Управление фоновой музыкой
        function toggleBackgroundMusic() {
            if (soundEnabled) {
                backgroundMusic.play();
            } else {
                backgroundMusic.pause();
            }
        }

        // Обновление отображения ставки
        function updateBetDisplay() {
            currentBetDisplay.textContent = currentBet;
            betAmountDisplay.textContent = currentBet;
        }

        // Увеличение ставки
        increaseBetButton.addEventListener('click', function() {
            if (isSpinning) return;
            if (currentBet < Math.min(1000, balance)) {
                currentBet += 10;
                updateBetDisplay();
            }
        });

        // Уменьшение ставки
        decreaseBetButton.addEventListener('click', function() {
            if (isSpinning) return;
            if (currentBet > 10) {
                currentBet -= 10;
                updateBetDisplay();
            }
        });

        // Максимальная ставка
        maxBetButton.addEventListener('click', function() {
            if (isSpinning) return;
            currentBet = Math.min(1000, balance);
            updateBetDisplay();
        });

        // Генерация символов для барабана
        function generateReelSymbols(resultSymbol) {
            const reelSymbols = [];
            for (let i = 0; i < CENTER_INDEX; i++) {
                reelSymbols.push(symbols[Math.floor(Math.random() * symbols.length)]);
            }
            reelSymbols.push(resultSymbol);
            for (let i = 0; i < 10; i++) {
                reelSymbols.push(symbols[Math.floor(Math.random() * symbols.length)]);
            }
            return reelSymbols;
        }

        // Создание HTML для символов на барабанах
        function createReelHTML(reelSymbols) {
            return reelSymbols.map(symbol => `<div class="symbol">${symbol}</div>`).join('');
        }

        // Функция для вращения барабанов
        function spinReels() {
            if (isSpinning || balance < currentBet) return;
            isSpinning = true;
            spinButton.disabled = true;
            playSound(spinSound);

            balance -= currentBet;
            balanceDisplay.textContent = balance;

            resultText.classList.remove('show', 'win-message', 'lose-message');
            winLine.style.opacity = '0';

            const result = [
                symbols[Math.floor(Math.random() * symbols.length)],
                symbols[Math.floor(Math.random() * symbols.length)],
                symbols[Math.floor(Math.random() * symbols.length)]
            ];

            reels.forEach((reel, i) => {
                const reelSymbols = generateReelSymbols(result[i]);
                reel.innerHTML = createReelHTML(reelSymbols);
                
                reel.style.transition = 'none';
                reel.style.transform = 'translateY(0)';
                
                setTimeout(() => {
                    const spinDuration = 2.5 + i * 0.5 + (Math.random() * 0.5);
                    const stopPosition = -SYMBOL_HEIGHT * (CENTER_INDEX - 1);
                    reel.style.transition = `transform ${spinDuration}s cubic-bezier(0.25, 0.8, 0.5, 1)`;
                    reel.style.transform = `translateY(${stopPosition - SYMBOL_HEIGHT * 20}px)`;
                    
                    setTimeout(() => {
                        reel.style.transition = 'transform 0.5s ease-out';
                        reel.style.transform = `translateY(${stopPosition}px)`;
                    }, spinDuration * 1000 - 500);
                }, 100 * i);
            });

            setTimeout(() => {
                isSpinning = false;
                spinButton.disabled = false;
                checkWin(result);
            }, 4000);
        }

        // Проверка выигрыша
        function checkWin(result) {
            let winMultiplier = 0;
            const [sym1, sym2, sym3] = result;
            
            if (sym1 === sym2 && sym2 === sym3) {
                switch (sym1) {
                    case '7️⃣': winMultiplier = 50; break;
                    case '💎': winMultiplier = 20; break;
                    case '🔔': winMultiplier = 15; break;
                    case '🃏': winMultiplier = 10; break;
                    case '🍒': winMultiplier = 8; break;
                    case '🍇': winMultiplier = 6; break;
                    case '🍋': winMultiplier = 5; break;
                }
            } else if (sym1 === sym2 || sym2 === sym3 || sym1 === sym3) {
                winMultiplier = 2;
            }
            
            const winAmount = currentBet * winMultiplier;
            balance += winAmount;
            balanceDisplay.textContent = balance;
            winAmountDisplay.textContent = winAmount;
            
            if (winAmount > 0) {
                resultText.textContent = `You won ${winAmount} coins!`;
                resultText.classList.add('win-message', 'show');
                winLine.style.opacity = '1';
                playSound(winSound);
                
                reels.forEach((reel) => {
                    const symbols = reel.querySelectorAll('.symbol');
                    symbols[CENTER_INDEX].classList.add('win');
                });
                
                if (winMultiplier === 50) {
                    showJackpot(winAmount);
                    playSound(jackpotSound);
                }
                
                setTimeout(() => {
                    reels.forEach(reel => reel.querySelectorAll('.symbol').forEach(s => s.classList.remove('win')));
                }, 2000);
            } else {
                resultText.textContent = 'Better luck next time!';
                resultText.classList.add('lose-message', 'show');
            }
        }

        // Показать джекпот
        function showJackpot(amount) {
            jackpotAmount.textContent = amount;
            jackpotModal.style.display = 'flex';
            createConfetti();
        }

        // Создание конфетти
        function createConfetti() {
            particles.style.display = 'block';
            for (let i = 0; I < 100; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti');
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.top = `${Math.random() * 100}%`;
                confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
                confetti.style.animationDuration = `${1 + Math.random()}s`;
                particles.appendChild(confetti);
                
                setTimeout(() => confetti.remove(), 3000);
            }
            setTimeout(() => particles.style.display = 'none', 3000);
        }

        // Навигационная панель
        navItems.forEach(item => {
            item.addEventListener('click', () => {
                const tab = item.getAttribute('data-tab');
                navItems.forEach(i => i.classList.remove('active'));
                item.classList.add('active');

                if (tab === 'play') {
                    gameContainer.style.display = 'block';
                    toggleBackgroundMusic();
                } else if (tab === 'about') {
                    gameContainer.style.display = 'none';
                    settingsModal.style.display = 'flex';
                    previousScreen = 'about';
                } else {
                    gameContainer.style.display = 'none';
                    backgroundMusic.pause();
                    alert(`Tab "${tab}" is not implemented in this demo.`);
                }
            });
        });

        // Кнопка таблицы выплат
        paytableGameButton.addEventListener('click', () => {
            paytableModal.style.display = 'flex';
            previousScreen = 'game';
        });

        // Баланс: пополнение и снятие (заглушки)
        replenishButton.addEventListener('click', () => {
            alert('Replenish functionality not implemented in this demo.');
        });

        withdrawButton.addEventListener('click', () => {
            alert('Withdraw functionality not implemented in this demo.');
        });

        // Обратные кнопки
        backToNav.addEventListener('click', () => {
            gameContainer.style.display = 'block';
            backgroundMusic.pause();
        });

        backToGameFromBalance.addEventListener('click', () => {
            balanceModal.style.display = 'none';
            gameContainer.style.display = 'block';
        });

        backToGameFromPaytable.addEventListener('click', () => {
            paytableModal.style.display = 'none';
            gameContainer.style.display = 'block';
        });

        backToGameFromJackpot.addEventListener('click', () => {
            jackpotModal.style.display = 'none';
            gameContainer.style.display = 'block';
        });

        backToPreviousFromSettings.addEventListener('click', () => {
            settingsModal.style.display = 'none';
            if (previousScreen === 'about') {
                // Вернуться к навигации
                gameContainer.style.display = 'none';
            } else {
                gameContainer.style.display = 'block';
            }
        });

        // Закрытие модальных окон
        closeBalance.addEventListener('click', () => {
            balanceModal.style.display = 'none';
            gameContainer.style.display = 'block';
        });

        closePaytable.addEventListener('click', () => {
            paytableModal.style.display = 'none';
            gameContainer.style.display = 'block';
        });

        closeJackpot.addEventListener('click', () => {
            jackpotModal.style.display = 'none';
        });

        closeSettings.addEventListener('click', () => {
            settingsModal.style.display = 'none';
            if (previousScreen === 'about') {
                gameContainer.style.display = 'none';
            } else {
                gameContainer.style.display = 'block';
            }
        });

        // Обработчик вращения
        spinButton.addEventListener('click', spinReels);

        // Управление громкостью
        volumeSlider.addEventListener('input', (e) => {
            const volume = e.target.value;
            setVolume(volume);
        });

        // Автоматическое включение музыки при загрузке
        window.addEventListener('load', () => {
            toggleBackgroundMusic();
        });
    </script>
</body>
</html>